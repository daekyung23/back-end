[
  {
    "name": "v_client",
    "definition": "select `c`.`client_id` AS `client_id`,coalesce(`c`.`client_name`,'') AS `client_name`,`c`.`parent_client_id` AS `parent_client_id`,coalesce(`c`.`default_client_branch_rate_id`,0) AS `default_client_branch_rate_id`,coalesce(`c`.`is_active`,1) AS `is_active`,`p`.`client_name` AS `parent_client_name`,`cr`.`rate_type` AS `client_rate`,`cr`.`rate_detail` AS `rate_detail`,count(distinct `cb`.`client_branch_id`) AS `branch_count` from (((`mydb`.`client` `c` left join `mydb`.`client` `p` on((`c`.`parent_client_id` = `p`.`client_id`))) left join `mydb`.`client_rate` `cr` on((`c`.`default_client_branch_rate_id` = `cr`.`client_rate_id`))) left join `mydb`.`client_branch` `cb` on((`c`.`client_id` = `cb`.`client_id`))) group by `c`.`client_id`"
  },
  {
    "name": "v_client_branch",
    "definition": "select `cb`.`client_branch_id` AS `client_branch_id`,`cb`.`client_branch_name` AS `client_branch_name`,`cb`.`client_id` AS `client_id`,`cb`.`sigungu_id` AS `sigungu_id`,`cb`.`mgmt_dept_id` AS `mgmt_dept_id`,`cb`.`client_branch_rate_id` AS `client_branch_rate_id`,`cb`.`branch_mgr_name` AS `branch_mgr_name`,`cb`.`branch_mgr_mobile_num` AS `branch_mgr_mobile_num`,`cb`.`branch_mgr_office_num` AS `branch_mgr_office_num`,`cb`.`branch_mgr_email` AS `branch_mgr_email`,`cb`.`is_active` AS `is_active`,`cb`.`remote_support` AS `remote_support`,`cb`.`push_alert` AS `push_alert`,`c`.`client_name` AS `client_name`,`sgg`.`sigungu_name` AS `sigungu_name`,`sd`.`sido_name` AS `sido_name` from (((`mydb`.`client_branch` `cb` left join `mydb`.`client` `c` on((`cb`.`client_id` = `c`.`client_id`))) left join `mydb`.`sigungu` `sgg` on((`cb`.`sigungu_id` = `sgg`.`sigungu_id`))) left join `mydb`.`sido` `sd` on((`sgg`.`sido_id` = `sd`.`sido_id`)))"
  },
  {
    "name": "v_consumable_model",
    "definition": "select concat(`dcc`.`consumable_model_id`,'_',coalesce(`dcc`.`device_model_id`,0)) AS `compatibility_id`,`cm`.`consumable_model_id` AS `consumable_model_id`,`cm`.`manufacturer` AS `manufacturer`,`cm`.`consumable_name` AS `consumable_name`,`cm`.`consumable_type` AS `consumable_type`,`dm`.`manufacturer` AS `model_manufacturer`,`dm`.`model_name` AS `model_name` from ((`mydb`.`device_consumable_compatibility` `dcc` left join `mydb`.`consumable_model` `cm` on((`cm`.`consumable_model_id` = `dcc`.`consumable_model_id`))) left join `mydb`.`device_model` `dm` on((`dm`.`device_model_id` = `dcc`.`device_model_id`)))"
  },
  {
    "name": "v_dept",
    "definition": "with recursive `dept_path` as (select `d`.`dept_id` AS `dept_id`,cast(`d`.`dept_id` as char(20) charset utf8mb4) AS `path_id`,cast(`d`.`dept_name` as char(100) charset utf8mb4) AS `path_name`,1 AS `level` from `mydb`.`dept` `d` where (`d`.`parent_dept_id` is null) union all select `d`.`dept_id` AS `dept_id`,concat(`dp`.`path_id`,',',cast(`d`.`dept_id` as char(20) charset utf8mb4)) AS `CONCAT(dp.path_id, ',', CAST(d.dept_id AS CHAR(20)))`,concat(`dp`.`path_name`,',',`d`.`dept_name`) AS `CONCAT(dp.path_name, ',', d.dept_name)`,(`dp`.`level` + 1) AS `dp.level + 1` from (`mydb`.`dept` `d` join `dept_path` `dp` on((`d`.`parent_dept_id` = `dp`.`dept_id`))) where (`dp`.`level` < 3)) select coalesce(`d`.`dept_id`,0) AS `dept_id`,coalesce(cast(substring_index(`d`.`path_id`,',',1) as char(20) charset utf8mb4),'') AS `dept_1_id`,coalesce(substring_index(`d`.`path_name`,',',1),'') AS `dept_1`,cast((case when (`d`.`level` = 2) then `d`.`dept_id` when (`d`.`level` = 3) then substring_index(substring_index(`d`.`path_id`,',',2),',',-(1)) else NULL end) as char(20) charset utf8mb4) AS `dept_2_id`,(case when (`d`.`level` = 2) then substring_index(`d`.`path_name`,',',-(1)) when (`d`.`level` = 3) then substring_index(substring_index(`d`.`path_name`,',',2),',',-(1)) else NULL end) AS `dept_2`,cast((case when (`d`.`level` = 3) then `d`.`dept_id` else NULL end) as char(20) charset utf8mb4) AS `dept_3_id`,(case when (`d`.`level` = 3) then substring_index(`d`.`path_name`,',',-(1)) else NULL end) AS `dept_3` from `dept_path` `d`"
  },
  {
    "name": "v_device",
    "definition": "select `d`.`device_id` AS `device_id`,`d`.`device_model_id` AS `device_model_id`,`d`.`owner_dept_id` AS `owner_dept_id`,`d`.`mgmt_dept_id` AS `mgmt_dept_id`,`d`.`serial` AS `serial`,`d`.`regi_date` AS `regi_date`,`d`.`mac` AS `mac`,`d`.`last_inspection_log_id` AS `last_inspection_log_id`,`d`.`last_location_log_id` AS `last_location_log_id`,`d`.`status_id` AS `status_id`,`dm`.`model_name` AS `model_name`,`dm`.`manufacturer` AS `manufacturer`,`od`.`dept_name` AS `owner_dept_name`,`md`.`dept_name` AS `mgmt_dept_name`,`l`.`location_id` AS `location_id`,`w`.`warehouse_id` AS `warehouse_id`,`w`.`warehouse_name` AS `warehouse_name`,`cb`.`client_branch_id` AS `client_branch_id`,`cb`.`client_branch_name` AS `client_branch_name`,`ds`.`status_name` AS `status_name`,max((case when (`om`.`option_type` = 'fax') then true else false end)) AS `has_fax`,max((case when (`om`.`option_type` = 'desk') then true else false end)) AS `has_desk`,max((case when (`om`.`option_type` = 'shelf') then true else false end)) AS `has_shelf` from ((((((((((`mydb`.`device` `d` left join `mydb`.`device_model` `dm` on((`d`.`device_model_id` = `dm`.`device_model_id`))) left join `mydb`.`dept` `od` on((`d`.`owner_dept_id` = `od`.`dept_id`))) left join `mydb`.`dept` `md` on((`d`.`mgmt_dept_id` = `md`.`dept_id`))) left join `mydb`.`device_location_log` `dl` on((`d`.`last_location_log_id` = `dl`.`device_location_log_id`))) left join `mydb`.`location` `l` on((`dl`.`location_id` = `l`.`location_id`))) left join `mydb`.`warehouse` `w` on((`l`.`warehouse_id` = `w`.`warehouse_id`))) left join `mydb`.`client_branch` `cb` on((`l`.`client_branch_id` = `cb`.`client_branch_id`))) left join `mydb`.`device_status` `ds` on((`d`.`status_id` = `ds`.`status_id`))) left join `mydb`.`device_option` `do` on((`d`.`device_id` = `do`.`location_device_id`))) left join `mydb`.`option_model` `om` on((`do`.`device_option_id` = `om`.`option_model_id`))) group by `d`.`device_id`,`d`.`device_model_id`,`d`.`owner_dept_id`,`d`.`mgmt_dept_id`,`d`.`serial`,`d`.`regi_date`,`d`.`mac`,`d`.`last_inspection_log_id`,`d`.`last_location_log_id`,`d`.`status_id`,`dm`.`model_name`,`dm`.`manufacturer`,`od`.`dept_name`,`md`.`dept_name`,`l`.`location_id`,`w`.`warehouse_id`,`w`.`warehouse_name`,`cb`.`client_branch_id`,`cb`.`client_branch_name`,`ds`.`status_name`"
  },
  {
    "name": "v_device_driver",
    "definition": "select `dd`.`device_driver_id` AS `device_driver_id`,`dd`.`device_model_id` AS `device_model_id`,`dd`.`manufacturer` AS `driver_manufacturer`,`dd`.`printer_language` AS `printer_language`,`dd`.`install_file_address` AS `install_file_address`,`dm`.`manufacturer` AS `model_manufacturer`,`dm`.`model_name` AS `model_name`,`dm`.`color_support` AS `color_support` from (`mydb`.`device_driver` `dd` left join `mydb`.`device_model` `dm` on((`dd`.`device_model_id` = `dm`.`device_model_id`)))"
  },
  {
    "name": "v_user",
    "definition": "select `u`.`user_id` AS `user_id`,`u`.`user_name` AS `user_name`,`u`.`login_id` AS `login_id`,`u`.`mobile_num` AS `mobile_num`,`u`.`office_num` AS `office_num`,`u`.`email` AS `email`,`u`.`modified_at` AS `modified_at`,`u`.`created_at` AS `created_at`,`u`.`is_active` AS `is_active`,`u`.`permission` AS `permission`,`u`.`dept_id` AS `dept_id`,`u`.`approval_role_id` AS `approval_role_id`,`u`.`position_id` AS `position_id`,`d`.`dept_name` AS `dept_name`,`d`.`parent_dept_id` AS `parent_dept_id` from (`mydb`.`user` `u` left join `mydb`.`dept` `d` on((`u`.`dept_id` = `d`.`dept_id`)))"
  },
  {
    "name": "v_warehouse",
    "definition": "select `w`.`warehouse_id` AS `warehouse_id`,`w`.`warehouse_name` AS `warehouse_name`,`w`.`mgmt_dept_id` AS `mgmt_dept_id`,`d`.`dept_name` AS `mgmt_dept_name`,`d`.`parent_dept_id` AS `mgmt_parent_dept_id` from (`mydb`.`warehouse` `w` left join `mydb`.`dept` `d` on((`w`.`mgmt_dept_id` = `d`.`dept_id`)))"
  }
]